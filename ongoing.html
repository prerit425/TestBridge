<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Start Exam</title>

<style>
  body {
    margin: 0;
    font-family: "Inter", Arial, sans-serif;
    background: linear-gradient(to bottom right, #13315C, #1E3A6A, #244A8D);
    color: white;
    min-height: 100vh;
    padding: 30px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
  }

  .exam-box {
    background: rgba(255,255,255,0.10);
    border: 1px solid rgba(255,255,255,0.12);
    padding: 24px;
    border-radius: 18px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  .option {
    padding: 14px;
    border-radius: 10px;
    margin-bottom: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    background: rgba(255,255,255,0.1);
    border: 1px solid transparent;
    transition: 0.2s;
  }

  .option:hover {
    background: rgba(255,255,255,0.15);
  }

  .option.selected {
    background: rgba(59,130,246,0.4);
    border: 1px solid rgba(147,197,253,0.4);
  }

  .buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 24px;
  }

  button {
    padding: 10px 22px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    color: white;
    transition: 0.2s;
  }

  .btn-prev {
    background: rgba(255,255,255,0.2);
  }

  .btn-next {
    background: rgba(59,130,246,0.6);
  }

  .btn-submit {
    background: rgba(34,197,94,0.7);
  }

  .btn-prev:disabled {
    background: rgba(255,255,255,0.1);
    cursor: not-allowed;
  }

  /* Submission Screen */
  .submitted-screen {
    text-align: center;
    margin-top: 80px;
  }

  .hidden { display: none; }
</style>
</head>

<body>

<div id="exam-page">

  <!-- HEADER -->
  <div class="header">
    <div>
      <h1 id="examTitle" style="margin:0;">Loading...</h1>
      <p id="question-counter" style="color:#B0D4FF;font-size:14px;margin-top:4px;"></p>
    </div>
    <div id="duration" style="color:#B0D4FF;font-size:14px;"></div>
  </div>

  <!-- QUESTION BOX -->
  <div class="exam-box">
    <h2 id="question-text" style="margin-bottom:22px;">Loading...</h2>
    <div id="options-container"></div>
  </div>

  <!-- BUTTONS -->
  <div class="buttons">
    <button id="prevBtn" class="btn-prev">Previous</button>
    <button id="nextBtn" class="btn-next">Next</button>
    <button id="submitBtn" class="btn-submit hidden">Submit Exam</button>
  </div>

</div>

<!-- SUBMISSION RESULT SCREEN -->
<div id="submitted-screen" class="hidden submitted-screen">
  <h1 style="font-size:28px;">ðŸŽ‰ Exam Submitted!</h1>
  <p style="font-size:20px;margin:10px 0;">
    You scored <span id="score"></span> out of <span id="total"></span>.
  </p>
  <p style="color:#B0D4FF;font-size:14px;">Redirecting to home in 3 seconds...</p>
</div>

<script>
/* -----------------------------------------------
   QUESTIONS (converted from config â†’ inline)
-------------------------------------------------*/
const examData = {
  examTitle: "Physics Midterm Examination",
  duration: 60,
  questions: [
    {
      id: 1,
      question: "What is the SI unit of electric current?",
      options: ["Volt", "Ampere", "Watt", "Newton"],
      correctAnswer: "Ampere",
      marks: 1
    },
    {
      id: 2,
      question: "Which law states that Voltage âˆ Current?",
      options: ["Faraday's Law", "Newton's Law", "Ohm's Law", "Coulomb's Law"],
      correctAnswer: "Ohm's Law",
      marks: 1
    },
    {
      id: 3,
      question: "Speed of light in vacuum is approximately:",
      options: ["2Ã—10â¸ m/s", "3Ã—10â¸ m/s", "1Ã—10â· m/s", "5Ã—10â¶ m/s"],
      correctAnswer: "3Ã—10â¸ m/s",
      marks: 1
    }
  ]
};

let index = 0;
let answers = {};
let submitted = false;

/* -----------------------------------------------
   DISABLE REFRESH, BACK, RIGHT-CLICK
-------------------------------------------------*/
window.addEventListener("beforeunload", (e) => {
  e.preventDefault();
  e.returnValue = "Are you sure you want to leave the exam?";
});

document.addEventListener("contextmenu", (e) => e.preventDefault());

document.addEventListener("keydown", (e) => {
  if (e.key === "F5" || (e.ctrlKey && e.key === "r") || e.key === "Backspace") {
    e.preventDefault();
  }
});

/* -----------------------------------------------
   RENDER QUESTION
-------------------------------------------------*/
function loadQuestion() {
  const q = examData.questions[index];

  document.getElementById("examTitle").textContent = examData.examTitle;
  document.getElementById("duration").textContent = "Duration: " + examData.duration + " min";
  document.getElementById("question-counter").textContent =
    `Question ${index + 1} of ${examData.questions.length}`;

  document.getElementById("question-text").textContent = q.question;

  const opts = document.getElementById("options-container");
  opts.innerHTML = "";

  q.options.forEach((opt) => {
    const div = document.createElement("label");
    div.className = "option";
    if (answers[q.id] === opt) div.classList.add("selected");

    div.innerHTML = `
      <input type="radio" name="q${q.id}" value="${opt}" 
      ${answers[q.id] === opt ? "checked" : ""} style="margin-right:10px;">
      ${opt}
    `;

    div.onclick = () => {
      answers[q.id] = opt;
      loadQuestion();
    };

    opts.appendChild(div);
  });

  document.getElementById("prevBtn").disabled = index === 0;

  if (index === examData.questions.length - 1) {
    document.getElementById("nextBtn").classList.add("hidden");
    document.getElementById("submitBtn").classList.remove("hidden");
  } else {
    document.getElementById("nextBtn").classList.remove("hidden");
    document.getElementById("submitBtn").classList.add("hidden");
  }
}

/* -----------------------------------------------
   BUTTONS
-------------------------------------------------*/
document.getElementById("prevBtn").onclick = () => {
  if (index > 0) index--;
  loadQuestion();
};

document.getElementById("nextBtn").onclick = () => {
  if (index < examData.questions.length - 1) index++;
  loadQuestion();
};

document.getElementById("submitBtn").onclick = () => submitExam();

/* -----------------------------------------------
   SUBMIT
-------------------------------------------------*/
function submitExam() {
  submitted = true;

  document.getElementById("exam-page").classList.add("hidden");
  document.getElementById("submitted-screen").classList.remove("hidden");

  let score = 0;
  examData.questions.forEach((q) => {
    if (answers[q.id] === q.correctAnswer) score += q.marks;
  });

  document.getElementById("score").textContent = score;
  document.getElementById("total").textContent = examData.questions.length;

  setTimeout(() => {
    window.location.href = "home.html";
  }, 3000);
}

/* START */
loadQuestion();
</script>

</body>
</html>
